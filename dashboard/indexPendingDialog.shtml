<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags always come first -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.4/css/bootstrap.min.css">
    <link rel="stylesheet" href= "BootStrapDatePicker/css/bootstrap-datetimepicker.css">
    <link re="stylesheet" href= "BootStrapDatePicker/css/bootstrap-datetimepicker-standalone.css">
    <Style type="text/css">
        
        .box {
    -o-text-overflow: ellipsis;   /* Opera */
    text-overflow:    ellipsis;   /* IE, Safari (WebKit) */
    overflow:hidden;              /* don't show excess chars */
    white-space:nowrap;           /* force single line */
    width: 100%;                 /* fixed width */
}
        
        .navbar-brand {
            width: 250px;
            word-wrap: break-word;
            border-bottom-left-radius:
        }
        
        .navButton {
            background-color: #0e8c1b;
            color: white;
            margin-left: 20px;
            width: 170px;
        }
        
        .logoutButton {
            background-color: gray;
            color: white;
            margin-left: 30px;
            width: 170px;
        }
        
        .card-text {
            margin: 10px;
        }
        
        .dropdown-toggle::after {
            float: right;
            margin-top: -10px;
            
            width: 10px;
        }
        #dateToggle::after {
            
            margin-top:-40px;
            margin-right: 15px;
            width: 10px;
        }
        
        .dropdown-menu > a:hover,
        .dropdown-menu > a:focus {
            background-color: #598e5f;
        }
        
        #SupervisorDropDown > a:hover,
        a:focus {
            background-color: #5b4d7c;
        }
        
        .truckDropDown_menu > a:hover,
        a:focus {
            background-color: #9b9b9b;
        }
        
        div.card {
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        }
        
        .CustomCards {
            border-radius: 4px;
        }
        
        p,
        H4 {
            text-align: left;
            
        }
        
        .card {
            padding-top: 10;
            margin-top: 30;
            border: 0px;
        }
        
        table {
            width: 100%;
            height: 150px;
            padding: 0px;
            margin: 0px;
        }
        
        th {
            border-bottom: 1px solid #fff;
            height: 36px;
        }
        
        th,
        td {
            padding: 5px;
            text-align: left;
        }
        
        .card-header {
            background-color: white;
        }
        
       
        
        .bootstrap-datetimepicker-widget.dropdown-menu{
            height: 250px;
            width: 100%;
            margin-top:0px;
            background-color:white;
            border-radius: 0px;
        }
        
        .custom-menu li:hover {
            background-color: #DEF;
        }
        
   
        
        .col-xs-5ths,
        .col-sm-5ths,
        .col-md-5ths,
        .col-lg-5ths {
            position: relative;
            min-height: 1px;
            padding-right: 10px;
            padding-left: 10px;
        }
        
        .col-xs-5ths {
            width: 20%;
            float: left;
        }
        
        @media (min-width: 768px) {
            .col-sm-5ths {
                width: 50%;
                float: left;
            }
            .col-lg-3 {
                width: 100%;
            }
            .col-lg-6 {
                width: 100%;
            }
        }
        
        @media (min-width: 992px) {
            .col-md-5ths {
                width: 20%;
                float: left;
            }
            .col-lg-3 {
                width: 100%;
            }
            .col-lg-6 {
                width: 100%;
            }
        }
        
        @media (min-width: 1200px) {
            .col-lg-5ths {
                width: 20%;
                float: left;
            }
            .col-lg-3 {
                width: 20%;
            }
            .col-lg-6 {
                width: 60%;
            }
        }
        /* TO blackout except the selected DIV*/
        
        .expose {
            position: relative;
        }
        
        #overlay {
            background: rgba(0, 0, 0, 0.5);
            display: none;
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 9;
        }
        
        .disableClick {
            pointer-events: none;
        }
		
		.modal-dialog {
			max-width: 85%!important;
			margin: 30px auto;		}
			
			
		.categorycard {
			position: relative;
			display: block;
			margin-bottom: .75rem;
			background-color: #fff;
			border-radius: .25rem;
			border-top: 1px solid rgba(0,0,0,.125);
			border-left: 1px solid rgba(0,0,0,.125);
			border-right: 1px solid rgba(0,0,0,.125);
		}
		 .inc
		{
			/*float: left;*/
			display: inline-block;
        }
      .dec
      {
			display: inline-block;
    	}
	.txtValue{
	    width: 30PX!important;
		align-items: center;
		margin:0px!important;
		text-align:center;
		height: 50%
	}
	#dialogRequest .row{
		margin-right: 0px;
		margin-left: 0px;
	
	}
	.divborder{
		border-bottom: 1px solid rgba(0,0,0,.125);
	}
	.modal-content{
		background-color: #F9F9F9
	}	
    </Style>


</head>

<body>
    <nav class="navbar navbar-full" style="background-color: #454545;">
        <a class="navbar-brand" style="margin-top:-5px; padding:0px;height:40px;color:white;" href="#">
            <div style="margin:0px; padding:0px;"><span><b style="margin:0px; padding:0px;">e-waste</b></span></div>
            <div style="margin:0px; padding:0px;"><span><p style="margin-top:-10px; padding:0px;">PICK UP</p></span></div>
        </a>
        <form class="form-inline pull-xs-right">
            
            <button class="btn navButton" type="submit">+ New Request</button>
       
            <button class="btn navButton" type="submit">Print</button>
            <button class="btn logoutButton" type="submit">Logout</button>
        </form>
    </nav>
    <div id="overlay"></div>
    <div class="container-fluid FirstRow">
        <div class="row">
            <div class="col-lg-2 firstDiv">
                <div>
                    <p></p>
                </div>
                <!--Card-->
                <div class="row">
                    <div class="col-lg-12 firstDiv">
                        <div class="card" style="background-color:#61a269; color:white;">
                            <!--Card content-->
                            <div style="margin:12px 0px 0px 12px; padding:5px;"><b Id="SelectedDay">Tuesday</b></div>
                           <input type='text' class="form-control selectedDate" id='datetimepicker2' value="09/27/2016" style="background-color:#61a269;color:white;border:0px;width:100%;" />
                       <span class='dropdown-toggle' id ='dateToggle'></span>
                        </div>
                    </div>

                    <div class="col-lg-12 firstDiv">

                        <div class="card expose" style="background-color:#61a269; color:white;">
                            <!--Card content-->

                            <!--Title-->

                            <div class="btn-group" style="width:100%;">
                                <button class="btn dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="width:100%;background-color:#61a269;color:white;">
                                    <div>
                                        <!--Title-->
                                        <H6 align="left">Borough</H6>

                                        <!--Text-->
                                        <b align="left" class="card-text" id='SelecteBorough' style="margin:0px;float:left;">Staten Island</b>
                                            
                                    </div>

                                </button>

                            </div>
                            <!--/.Card content-->

                        </div>
                        <!--/.Card-->
                    </div>
                    <div class="col-lg-12 firstDiv">
                        <div class="card expose" style="background-color:#61a269; color:white;">
                            <!--Card content-->
                            <div class="btn-group" style="width:100%;">
                                <button class="btn dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="width:100%;background-color:#61a269;color:white;">
                                    <div>
                                        <!--Title-->
                                        <H6 align="left">District</H6>
                                        <!--Text-->
                                        <b align="left" class="card-text selectedDistrict" id='0' style="margin:0px;float:left;">All Districts</b>
                                    </div>
                                </button>
                                <div class="dropdown-menu" style="width:100%;background-color:#61a269; border:0px;max-height: 150px;
  overflow:auto;">
                                    <a class="dropdown-item" style="color:white;" href="#" id='0'>All Districts</a>
                                    <a class="dropdown-item" style="color:white;" href="#" id='57'>SI01</a>
                                    <a class="dropdown-item" style="color:white;" href="#" id='58'>SI02</a>
                                    <a class="dropdown-item" style="color:white;" href="#" id='59'>SI03</a>
                                </div>
                            </div>
                            <!--/.Card content-->

                        </div>


                    </div>

                    <div class="col-lg-12 firstDiv">
                        <div class="card expose" style="background-color:#7461a2; color:white;">
                            <!--Card content-->
                            <div class="btn-group" style="width:100%;">
                                <button class="btn dropdown-toggle RequestList" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="width:100%;background-color:#7461a2;color:white;">
                                    <div>
                                        <!--Title-->
                                        <H6 align="left">Supervisor</H6>
                                        <!--Text-->
                                        <b align="left" class="card-text SelectedSupervisor" style="margin:0px;float:left;"></b>
                                    </div>
                                </button>
                                <div class="dropdown-menu" style="width:100%;background-color:#7461a2; border:0px;max-height: 150px;
  overflow:auto;" id="SupervisorDropDown">

                                </div>
                            </div>
                            <!--/.Card content-->

                        </div>
                    </div>
                    <div class="col-lg-12 firstDiv">
                        <div class="card" style=" background-color:#5393e7; color:white;">
                            <!--Card content-->

                            <div style="border-bottom:1px solid white; height:60px;">
                                <button class="btn AssignmentFilter" type="submit" style="width:100%;background-color:#5393e7;color:white;margin-top:10px;"><span style="float:left;"><b>Total Assignments</b></span><span id='TotalAssignmentsValue' style="float:right;"><span><b>  &#62;</b></span></span>
                                </button>
                            </div>
                            <div class="AssignedTruckDetails" id="AssignedTruckDetails" style="height: 250px;overflow:auto;">
                                
                            </div>

                        </div>
                        <!--/.Card content-->

                    </div>
                </div>
            </div>
            <!--/First div end div-->
            <!--/Second div-->
            <div class="col-lg-10 SecondDiv">
                <div>
                    <p></p>
                </div>
                <!--/Scond div first row-->
                <div class="row" style="border-bottom:1px solid #9b9b9b; padding-bottom:5px; margin:0px -5px 0px -5px;">
                    <div class="col-lg-3" style="padding:0px 7px 0px 7px; margin-left:-4px;">
                        <div class="card" style="background-color:#7461A2 ; color:white;">
                            <div class="card-block" style="padding: 0;">

                                <table>
                                    <tr>
                                        <th>Requested Quantity</th>
                                        <th id="TotalRequestedQuantity" class="dynamicData"></th>
                                    </tr>
                                    <tr>
                                        <td>Pending</td>
                                        <td id="PendingRequestsTotal" class="dynamicData"></td>
                                    </tr>
                                    <tr>
                                        <td>Complete</td>
                                        <td id='CompletedRequestsTotal' class="dynamicData"></td>
                                    </tr>
                                    <tr>
                                        <td>Not On Location</td>
                                        <td id='NotOnLocationRequestsTotal' class="dynamicData"></td>
                                    </tr>
                                </table>

                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3" style="padding:0px 7px 0px 7px;">
                        <div class="card" style="background-color:#EAC454; color:white;">
                            <div class="card-block" style="padding: 0;">
                                <table>
                                    <tr>
                                        <th>Pending Items Quantity</th>
                                        <th id='TotlaTvs' class="dynamicData"></th>
                                    </tr>
                                    <tr>
                                        <td><span><img src="./Assets/White-CRT-TV-Icon.svg" alt="TV Icon" style="width:25px;height:20px; padding:0px; margin-bottom:5px; margin-right:8px;"></span><span>CRT TVs</span></td>
                                        <td id='TotalCRTTVs' class="dynamicData"></td>
                                    </tr>
                                    <tr>
                                        <td><span><img src="./Assets/white-TV.svg" alt="TV Icon" style="width:20px;height:15px; padding:0px; margin-bottom:2px; margin-right:8px;"></span><span>LCD TVs</span></td>
                                        <td id='TotalLCDTVs' class="dynamicData"></td>
                                    </tr>
                                    <tr>
                                        <td>Other</td>
                                        <td id='TotalOthers' class="dynamicData"></td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6" style="padding:0px 7px 0px 7px;">
                        <div class="card" style="background-color:#EAC454; color:white; height:150px;">
                            <div style="height:100%;">
                                <div style=" width:50%; height:100%; padding:0px 5px 0px 5px; border-right:1px solid white;float:left;">
                                    <div style="height: 36px; padding-top:5px; margin-bottom:5px;  border-bottom:1px solid white;"><span style="margin-left:10px;">Pending CRT TV's</span><span style="float:right;margin-right:10px;" id='CRTTVsHeaderTotal' class="dynamicData"></span></div>
                                    <div style=" width:50%;height:70%;border-right:1px solid white;float:left;">
                                        <p style="margin:3px 5px 10px; 5px"><span><img src="./Assets/White-CRT-TV-Icon.svg" alt="TV Icon" style="width:25px;height:20px; padding:0px; margin-bottom:5px; margin-right:8px;"></span><span>&#60; 20'</span><span style="float:right;margin-right:10px;" id='CRTTVSmallerThan20' class="dynamicData"></span></p>
                                        <p style="margin:3px 5px 10px; 5px"><span><img src="./Assets/White-CRT-TV-Icon.svg" alt="TV Icon" style="width:25px;height:20px; padding:0px; margin-bottom:5px; margin-right:8px;"></span><span>20' - 30'</span><span style="float:right;margin-right:10px;" id='CRTTV20to30' class="dynamicData"></span></p>
                                        <p style="margin:3px 5px 10px; 5px"><span><img src="./Assets/White-CRT-TV-Icon.svg" alt="TV Icon" style="width:25px;height:20px; padding:0px; margin-bottom:5px; margin-right:8px;"></span><span>31' - 40'</span><span style="float:right;margin-right:10px;" id='CRTTV31to40' class="dynamicData"></span></p>
                                    </div>
                                    <div style=" width:50%;height:70%;float:left;">
                                        <p style="margin:3px 5px 10px; 5px"><span><img src="./Assets/White-CRT-TV-Icon.svg" alt="TV Icon" style="width:25px;height:20px; padding:0px; margin-bottom:5px; margin-right:8px;"></span><span>41' - 50'</span><span style="float:right;margin-right:10px;" id='CRTTV41to50' class="dynamicData"></span></p>
                                        <p style="margin:3px 5px 10px; 5px"><span><img src="./Assets/White-CRT-TV-Icon.svg" alt="TV Icon" style="width:25px;height:20px; padding:0px; margin-bottom:5px; margin-right:8px;"></span><span>51' - 60'</span><span style="float:right;margin-right:10px;" id='CRTTV51to60' class="dynamicData"></span></p>
                                        <p style="margin:3px 5px 10px; 5px"><span><img src="./Assets/White-CRT-TV-Icon.svg" alt="TV Icon" style="width:25px;height:20px; padding:0px; margin-bottom:5px; margin-right:8px;"></span><span>&#60; 60'</span><span style="float:right;margin-right:10px;" id='CRTTVLargerThan60' class="dynamicData"></span></p>
                                    </div>
                                </div>
                                <div style=" width:50%;height:100%;padding:0px 5px 0px 5px; float:left;">
                                    <div style="height: 36px; padding:5px; margin-bottom:5px;border-bottom:1px solid white;"><span style="margin-left:10px;">Pending LCD TV's</span><span style="float:right;margin-right:10px;" id='LCDTVsHeaderTotal' class="dynamicData"></span></div>
                                    <div style=" width:50%;height:70%;border-right:1px solid white;float:left;">
                                        <p style="margin:3px 5px 10px; 5px"><span><img src="./Assets/white-TV.svg" alt="TV Icon" style="width:20px;height:15px; padding:0px; margin-bottom:5px; margin-right:8px;"></span><span>&#60; 20'</span><span style="float:right;margin-right:10px;" id='LCDTVSmallerThan20' class="dynamicData"></span></p>
                                        <p style="margin:3px 5px 10px; 5px"><span><img src="./Assets/white-TV.svg" alt="TV Icon" style="width:20px;height:15px; padding:0px; margin-bottom:5px; margin-right:8px;"></span><span>20' - 30'</span><span style="float:right;margin-right:10px;" id='LCDTV20to30' class="dynamicData"></span></p>
                                        <p style="margin:3px 5px 10px; 5px"><span><img src="./Assets/white-TV.svg" alt="TV Icon" style="width:20px;height:15px; padding:0px; margin-bottom:5px; margin-right:8px;"></span><span>31' - 40'</span><span style="float:right;margin-right:10px;" id='LCDTV31to40' class="dynamicData"></span></p>
                                    </div>
                                    <div style=" width:50%;height:70%;float:left;">
                                        <p style="margin:3px 5px 10px; 5px"><span><img src="./Assets/white-TV.svg" alt="TV Icon" style="width:20px;height:15px; padding:0px; margin-bottom:5px; margin-right:8px;"></span><span>41' - 50'</span><span style="float:right;margin-right:10px;" id='LCDTV41to50' class="dynamicData"></span></p>
                                        <p style="margin:3px 5px 10px; 5px"><span><img src="./Assets/white-TV.svg" alt="TV Icon" style="width:20px;height:15px; padding:0px; margin-bottom:5px; margin-right:8px;"></span><span>51' - 60'</span><span style="float:right;margin-right:10px;" id='LCDTV51to60' class="dynamicData"></span></p>
                                        <p style="margin:3px 5px 10px; 5px"><span><img src="./Assets/white-TV.svg" alt="TV Icon" style="width:20px;height:15px; padding:0px; margin-bottom:5px; margin-right:8px;"></span><span>&#60; 60'</span><span style="float:right;margin-right:10px;" id='LCDTVLargerThan60' class="dynamicData"></span></p>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <!--/Scond div first row end-->
                <div class="row dynamicData" id="target" style="height: 770px;
  overflow-y: scroll; padding-top:10px;">
                    <!--/Scond div second row -->

                </div>
                <!--/Scond div second row -->
            </div>
            <!--/Scond div end-->


        </div>
    </div>
	
<div class="modal fade" id="msgModal" tabindex="-1" role="dialog" aria-labelledby="msgModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
		   <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button> 
        <!-- <div class="post_close" data-dismiss="modal"><img src="/assets/zws/images/mobile_close_button.png"></div>--> 
        <!-- <h4 class="modal-title">Messages</h4> -->
		</div>

      <div class="modal-body js-modalBody">
       <div class="modal-body-scroller">
		<div>
          <div class="media-list media-list-users list-group js-msgGroup" id="dialogRequest">
			
			 <div class="row">
				<div class="col-md-2ths col-xs-2" id ="card"> 
			
				</div>
				<div class="col-md-6ths col-xs-5" id ="tvCategory" style="line-height:35px;"  > 
			
				</div>
				<div class="col-md-6ths col-xs-5 "> 
					<div class="categorycard CustomCards" style="line-height:35px;">
						<div class="row" style="background-color:#EAC454;color:white;">
								<div class="col-md-6ths col-xs-8 ctgName ">Items</div><div class="col-md-3ths col-xs-2" >Requested</div> <div class="col-md-3ths col-xs-2">Picked Up</div> 
						</div>
						<div id="otherCtegory" >
						</div>
					</div>
				</div>
			</div>		

          </div>


        </div>
       </div>
	  </div>
    </div>
  </div>
</div>
	
    <!-- jQuery first, then Tether, then Bootstrap JS.
-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.2.0/js/tether.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.4/js/bootstrap.min.js"></script>
    <script src="BootStrapDatePicker/js/moment.js"></script>
    <script src="BootStrapDatePicker/js/bootstrap-datetimepicker.min.js"></script>
    <script type="text/javascript">
        // JAVASCRIPT (jQuery) 
        //"http://msdwvw-dsndny01.csc.nycnet/ePickupsAPI/api/PickupRequest/GetDashboard?SearchDate=09%2F24%2F2016&Borough=ALL&DistrictId=0&TruckId=0",
        var SearchDate = '09-24-2016';
        var SelecteBorough = $('#SelecteBorough').text;
        var selectedDistrictID = 57;
        var SuperVisorRequestUrl = 'http://msdwvw-dsndny01.csc.nycnet/ePickupsAPI/api/Dashboard/GetEmployees';
        var AssignmnetsUrl = 'http://msdwvw-dsndny01.csc.nycnet/ePickupsAPI/api/Dashboard/GetTrucks?Borough=staten Island&DistrictId=57';    
function dayOfWeekAsString(dayIndex) {
  return ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][dayIndex];
}
//        
//        {
//    "$id": "1",
//    "TruckId": 7,
//    "TruckSerialNo": "Truck-501",
//    "MaterialType": null,
//    "RequestsPerTruck": 24,
//    "CurrentSupervisor": {
//      "$id": "2",
//      "EmployeeId": 1,
//      "FirstName": null,
//      "LastName": null,
//      "EmployeeType": null,
//      "ColorCode": "#7461A2",
//      "FullName": "S SuperLname501"
//    },
//    "CurrentDriver": {
//      "$id": "3",
//      "EmployeeId": 2,
//      "FirstName": null,
//      "LastName": null,
//      "EmployeeType": null,
//      "ColorCode": "#FFFFFF",
//      "FullName": "D DriverLname"
//    },
//    "CurrentLoader": {
//      "$id": "4",
//      "EmployeeId": 8,
//      "FirstName": null,
//      "LastName": null,
//      "EmployeeType": null,
//      "ColorCode": "#00AF01",
//      "FullName": "S Sec6Lname"
//    },
//    "TotalAssignments": 24
//  },
//        
        $(function () {
            
             $('#datetimepicker2').datetimepicker({
                    format: 'L'
                });
        });
        
        var FadeIn = function (e) {
                if ($('#overlay').is(':visible')) {
                    $('#overlay').fadeOut(300, function () {
                        $('.expose').css('z-index', '1');
                    });
                } else {
                    $(this).css('z-index', '99999');
                    $('#overlay').fadeIn(300);
                }
            }
        
        var FadeOut = function (e) {

            if ($('#overlay').is(':visible')) {
                $('#overlay').fadeOut(300, function () {
                    $('.expose').css('z-index', '1');
                });
            }
        }
        
        
        var Request_Assignments = function(Borough,DistrictID){
        
              $('.AssignedTruckDetails').empty();
            var AssignmnetsUrl = 'http://msdwvw-dsndny01.csc.nycnet/ePickupsAPI/api/Dashboard/GetTrucks?Borough='+Borough+'&DistrictId='+DistrictID; 
          
             $.ajax({
                async: false,
                url: AssignmnetsUrl,
                type: "GET",
                dataType: 'json',
                crossDomain: true,
                success: function (json) {
                    if (json != undefined) {
                        var AssignedTruckHtml = ''; 
                        var TotalAssignments = json[0].TotalAssignments;
                       var SupervisorDetails = json[0].CurrentSupervisor;
                        var SupervisorName = SupervisorDetails.FullName;
                       
                         $('.SelectedSupervisor').text(SupervisorName);
                        $('#TotalAssignmentsValue').text(TotalAssignments);
                        $.each(json, function (key, item) {    
                           
                          var AssignedDriver = item.CurrentDriver;
                            var AssignedLoader = item.CurrentLoader;
                            AssignedTruckHtml += '<div id = "'+item.TruckId+'"style="border-bottom:1px solid white; height:125px;">\
                                <div>\
                                <button class="btn btn-primary AssignmentFilter" type="submit" style="width:100%;background-color:#5393e7;color:white; border:0px;padding:5px;">\
                                            <div style="float:right;">\
                                                '+item.RequestsPerTruck+'\
                                                <span><b>  &#62;</b></span>\
                                            </div>\
                                            <div>\
                                                <H5 align="left" class="card-text"> '+item.TruckSerialNo+'</H5>\
                                                <H6 align="left"> '+item.MaterialType+'</H6>\
                                            </div>\
                                        </button>\
                                    </div>\
                                    <div style="width:100%; height:40px;">\
                                        <div  style="padding:5px;float:left;width:50%;">\
                                            <div class="btn-group " style="width:100%;">\
                                                <button class="btn dropdown RequestList" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"\ style="padding:0px;width:100%;height:30px; background-color:'+AssignedDriver.ColorCode+'; border:0px; outline:none;">\
                                                <div><span class="SelectedDriver" style="color:Black; float:left; margin:5px 15px 5px 15px;">'+AssignedDriver.FullName+'</span>\</div>\
                                                </button>\
                                                <div class="dropdown-menu truckDropDown_menu truckDropDown_menu_DriverList" style="border:0px; width:200%; max-height:150px;overflow:auto;">\
                                                </div>\
                                            </div>\
                                        </div>\
                                        <div  style="padding:5px;float:left;width:50%;">\
                                            <div class="btn-group " style="width:100%;">\
                                                <button class="btn dropdown RequestList" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="\ padding:0px;width:100%; height:30px; background-color:'+AssignedLoader.ColorCode+'; border:0px; outline:none;">\
                                                    <div><span style="color:Black; float:left; margin:5px 15px 5px 15px;">'+AssignedLoader.FullName+'</span></div>\
                                                </button>\
                                                <div class="dropdown-menu truckDropDown_menu dropdown-menu-right truckDropDown_menu_LoaderList" style="border:0px; width:200%; height:150px;overflow:auto;">\
                                                </div>\
                                            </div>\
                                        </div>\
                                    </div>\
                                </div>'
                        });
                        $('.AssignedTruckDetails').append(AssignedTruckHtml);
                    }
                }
            });
        }
        
        var Request_Supervisor_Driver_loader_list = function(){
             $('#SupervisorDropDown').empty();
                        $('.SelectedSupervisor').empty();
                        $('.truckDropDown_menu_DriverList').empty();
                        $('.truckDropDown_menu_LoaderList').empty();
           $.ajax({
                async: false,
                url: SuperVisorRequestUrl,
                type: "GET",
                dataType: 'json',
                crossDomain: true,
                success: function (json) {
                    if (json != undefined) {
                        var SupervisorList = json.SupervisorList;
                        var DriverList = json.DriverList;
                        var LoaderList = json.LoaderList;
                        var SupervisorName = '';
                        var DriverName = '<a class="dropdown-item" style="color:black;" href="#" id ="0">N/A</a>';
                        var LoaderName = '<a class="dropdown-item" style="color:black;" href="#" id ="0">N/A</a>';
                        $.each(SupervisorList, function (key, item) {
                            SupervisorName += '<a class="dropdown-item" style="color:white;" href="#" id = '+ item.EmployeeId + '>' + item.FullName + '</a>'
                        });
                        $.each(DriverList, function (key, item) {
                            DriverName += '<a class="dropdown-item" style="color:black;" href="#" id = ' + item.EmployeeId + '>' + item.FullName + '</a>'
                        });
                        $.each(LoaderList, function (key, item) {
                            LoaderName += '<a class="dropdown-item" style="color:black;" href="#" id = ' + item.EmployeeId + '>' + item.FullName + '</a>'
                        });

                        $('#SupervisorDropDown').append(SupervisorName);
                        $('.SelectedSupervisor').append(SupervisorList[0].FullName);
                        $('.truckDropDown_menu_DriverList').append(DriverName);
                        $('.truckDropDown_menu_LoaderList').append(LoaderName);
                    }
                }
            });  
        }
        
        var RequestDashboard = function (Date, Borough, DistrictID, TruckId) {
            
            $(".dynamicData").empty();
            var RequestUrl = 'http://msdwvw-dsndny01.csc.nycnet/ePickupsAPI/api/Dashboard/GetDashboard?SearchDate=' + Date + '&Borough=' + Borough + '&DistrictId=' + DistrictID + '&TruckId=' + TruckId;

            $.ajax({
                async: false,
                url: RequestUrl,
                type: "GET",
                dataType: 'json',
                crossDomain: true,
                success: function (json) {
                    if (json != undefined) {

                        var ctgStr = '';
                        var Colors = ['#5393E7', '#F0f0f0', '#DD6159'];
                        var TextColors = ['#9b9b9b', '#ffffff'];
                        var HeaderTextColors = ['#5393E7', '#9b9b9b', '#DD6159'];
                        var color = '';
                        var textColor = '';
                        var HeaderTextColor = '';
                        var status = 'Done';
                        var CustomCard = '';

                        if (json[0] == undefined) {

                            $('#TotalRequestedQuantity').append('0');
                            $('#TotlaTvs').append('0');
                            $('#CRTTVsHeaderTotal').append('0');
                            $('#LCDTVsHeaderTotal').append('0');
                            $('#PendingRequestsTotal').append('0');
                            $('#CompletedRequestsTotal').append('0');
                            $('#NotOnLocationRequestsTotal').append('0');
                            $('#TotalCRTTVs').append('0');
                            $('#TotalLCDTVs').append('0');
                            $('#TotalOthers').append('0');
                            $('#CRTTVSmallerThan20').append('0');
                            $('#CRTTV20to30').append('0');
                            $('#CRTTV31to40').append('0');
                            $('#CRTTV41to50').append('0');
                            $('#CRTTV51to60').append('0');
                            $('#CRTTVLargerThan60').append('0');
                            $('#LCDTVSmallerThan20').append('0');
                            $('#LCDTV20to30').append('0');
                            $('#LCDTV31to40').append('0');
                            $('#LCDTV41to50').append('0');
                            $('#LCDTV51to60').append('0');
                            $('#LCDTVLargerThan60').append('0');
                            $('#target').append('<div class="alert alert-warning" style="margin:20px;text-align:center;" role="alert">There are no tasks on <strong>'+$('.selectedDate').val()+', Staten Island, '+$('.selectedDistrict').text()+'.</strong></div>');
                            
                        }

                        var FirstOject = json[0];
                        var TotalRequestedQuantity = parseInt(FirstOject.PendingRequestsTotal) + parseInt(FirstOject.CompletedRequestsTotal) + parseInt(FirstOject.NotOnLocationRequestsTotal);
                        var TotlaTvs = parseInt(FirstOject.TotalCRTTVs) + parseInt(FirstOject.TotalLCDTVs) + parseInt(FirstOject.TotalOthers);



                        $('#TotalRequestedQuantity').append(TotalRequestedQuantity);
                        $('#TotlaTvs').append(TotlaTvs);
                        $('#CRTTVsHeaderTotal').append(FirstOject.TotalCRTTVs);
                        $('#LCDTVsHeaderTotal').append(FirstOject.TotalLCDTVs);
                        $('#PendingRequestsTotal').append(FirstOject.PendingRequestsTotal);
                        $('#CompletedRequestsTotal').append(FirstOject.CompletedRequestsTotal);
                        $('#NotOnLocationRequestsTotal').append(FirstOject.NotOnLocationRequestsTotal);
                        $('#TotalCRTTVs').append(FirstOject.TotalCRTTVs);
                        $('#TotalLCDTVs').append(FirstOject.TotalLCDTVs);
                        $('#TotalOthers').append(FirstOject.TotalOthers);
                        $('#CRTTVSmallerThan20').append(FirstOject.CRTTVSmallerThan20);
                        $('#CRTTV20to30').append(FirstOject.CRTTV20to30);
                        $('#CRTTV31to40').append(FirstOject.CRTTV31to40);
                        $('#CRTTV41to50').append(FirstOject.CRTTV41to50);
                        $('#CRTTV51to60').append(FirstOject.CRTTV51to60);
                        $('#CRTTVLargerThan60').append(FirstOject.CRTTVLargerThan60);
                        $('#LCDTVSmallerThan20').append(FirstOject.LCDTVSmallerThan20);
                        $('#LCDTV20to30').append(FirstOject.LCDTV20to30);
                        $('#LCDTV31to40').append(FirstOject.LCDTV31to40);
                        $('#LCDTV41to50').append(FirstOject.LCDTV41to50);
                        $('#LCDTV51to60').append(FirstOject.LCDTV51to60);
                        $('#LCDTVLargerThan60').append(FirstOject.LCDTVLargerThan60);




                        $.each(json, function (key, item) {

                            if (item.StatusId == 2) {
                                color = Colors[1];
                                HeaderTextColor = HeaderTextColors[1];
                                TextColor = TextColors[0];

                            } else if (item.StatusId == 1) {
                                color = Colors[0];
                                HeaderTextColor = HeaderTextColors[0];
                                TextColor = TextColors[1];

                            } else if (item.StatusId == 3) {
                                color = Colors[2];
                                HeaderTextColor = HeaderTextColors[2];
                                TextColor = TextColors[1];

                            }

                            CustomCard += '<div class="col-md-5ths col-xs-6" id="' + item.RequestId + '">\
    <div class="card CustomCards" style="border:0px;" id="' + item.RequestId + '">\
        <div class="expose"  style="color:white;height: 36px; padding-top:5px; margin-bottom:5px;  border-bottom:1px solid grey;">\
               <div class="btn-group" style="width:100%; border-bottom:1px solid #9b9b9b;">\
    <button class="btn dropdown" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"style=" padding:0px;width:100%; background-color:white; border:0px; outline:none;">\
<div><span class="disableClick" style="color:' + HeaderTextColor + '; float:left; margin:5px;"><b>' + item.SRNumber + '</b></span>\
    <span style="float:right;background-color:#457cfb; color:white; margin: 3px;border-radius: 5px;padding: 5px;">' + item.TruckSerialNo + '</span></div>\
    </button>\
    <div class="dropdown-menu truckDropDown_menu"style="border:0px; width:100%; height:150px;overflow:auto;">\
        <a class="dropdown-item truckDropDown_list" style="color:black;" href="#">Truck-501</a>\
        <a class="dropdown-item truckDropDown_list" style="color:black;" href="#">Truck-502</a>\
        <a class="dropdown-item truckDropDown_list" style="color:black;" href="#">Truck-504</a>\
        <a class="dropdown-item truckDropDown_list" style="color:black;" href="#">Truck-505</a>\
<a class="dropdown-item truckDropDown_list" style="color:black;" href="#">Truck-501</a>\
        <a class="dropdown-item truckDropDown_list" style="color:black;" href="#">Truck-502</a>\
        <a class="dropdown-item truckDropDown_list" style="color:black;" href="#">Truck-504</a>\
        <a class="dropdown-item truckDropDown_list" style="color:black;" href="#">Truck-505</a>\
<a class="dropdown-item truckDropDown_list" style="color:black;" href="#">Truck-501</a>\
        <a class="dropdown-item truckDropDown_list" style="color:black;" href="#">Truck-502</a>\
        <a class="dropdown-item truckDropDown_list" style="color:black;" href="#">Truck-504</a>\
        <a class="dropdown-item truckDropDown_list" style="color:black;" href="#">Truck-505</a>\
    </div></div></div>\
        <div class="card-block" style="padding:0px 5px 5px 5px"; >\
            <p class="card-text">\
                <span class="box">'+item.BuildingNumber +' ' + item.Street + '</span>\
                <span style="float:right;">\
                    <b>' + item.District + '</b>\
                </span>\
            </p>\
            <p class="card-text">\
                <span>\
                    <img src="./Assets/Black-CRT-TV-Icon.svg" alt="TV Icon" style="width:25px;height:20px; padding:0px; margin-right:3px;margin-top:-4px;">\
                </span>\
                <span>CRT (' + item.CRTTVs + ')</span>\
                <span><img src="./Assets/black-TV.svg" alt="TV Icon" style="width:20px;height:15px; padding:0px; margin-right:5px;"></span>\
            <span>LCD (' + item.LCDTVs + ')</span>\
            <span style="float:right;">' + item.TVTotal + '</span>\
            </p>\
        <p class="card-text">\
            Other<span style="float:right;">' + item.OthersTotal + '</span>\
        </p>\
    </div><div class="completePopup" style="background-color:' + color + '; color:' + TextColor + '; border-radius:0px 0px 4px 4px; height: 36px; border:1px ' + color + ';">\
        <p style="padding:5px; margin-left:10px;"><span><b>' + item.Status + '</b></span><span style="float:right; margin-right:10px;">' + item.TotalRequestItems + '</span></p></div></div></div>'


                            //					ctgStr +='<div class="pure-u-1 pure-u-md-1-3-b ctgDiv" id="'+item.CategoryId+'">\
                            //						<div class="pure-u-md-1-24 pure-u-sm-1-24">\
                            //							<input type="checkbox" id="chkbox'+ item.CategoryId +'" class="chkCls"/>\
                            //						</div><div class="pure-u-md-20-24 pure-u-sm-20-24">'+ item.Category +'</div><div class="pure-u-md-3-24 pure-u-sm-3-24" >'
                            //						if (item.CategoryId == 1){
                            //							ctgStr +='<div class="inc button"> </div>\
                            //								<input type="text" class="txtValue" name="elecCtgCount" disabled id="Count'+ item.CategoryId +'" value="0">\
                            //								<div class="dec button"></div>'
                            //						}
                            //						else{
                            //							ctgStr +='<div class="dec button"></div>\
                            //								<input type="text" class="txtValue" name="elecCtgCount" disabled id="Count'+ item.CategoryId +'" value="0">\
                            //								<div class="inc button"></div>'
                            //						}
                            //					ctgStr += '</div> </div>'
 

                        });

                        $('#target').append(CustomCard);
                        
                    }

                }


            });

        }

        //"http://msdwvw-dsndny01.csc.nycnet/ePickupsAPI/api/PickupRequest/GetDashboard?SearchDate=09%2F24%2F2016&Borough=ALL&DistrictId=0&TruckId=0",

        $('body').ready(RequestDashboard($('.selectedDate').val(), 'All','0', '0'));
        $('body').ready(Request_Assignments('staten Island',$('.selectedDistrict').attr('id')));

        $(function () {
            
            
            
           $(document).on("click",".RequestList", function() {
							Request_Supervisor_Driver_loader_list()
          });
            
            // to Update the DropDown Items  selectedDistrict
            $(".dropdown-menu a").click(function () {

                $(this).parents(".btn-group").find('.card-text').text($(this).text());
                $(this).parents(".btn-group").find('.card-text').val($(this).text());
                $(this).parents(".btn-group").find('.card-text').attr('id', $(this).attr('id'));
                RequestDashboard( $('.selectedDate').val(), 'Staten Island', $('.selectedDistrict').attr('id'), '0');
                Request_Assignments('staten Island',$('.selectedDistrict').attr('id'));
               
            });
            
             $(".selectedDate").on("dp.change",function () {

               var myDate = new Date($('.selectedDate').val());
                var day = myDate.getDay();
                 
                 $('#SelectedDay').text(dayOfWeekAsString(day));
                RequestDashboard( $('.selectedDate').val(), 'Staten Island', $('.selectedDistrict').attr('id'), '0');
                 Request_Assignments('staten Island',$('.selectedDistrict').attr('id'));
               
            });
			
            // for black out animation
            $('.expose').on('click', FadeIn);
            $(document).on('click',FadeOut);
			
			
			
			  $(document).on("click","div.button", function() {
			  var $button = $(this);
			  var oldValue = $button.parent().find("input[type=text]").val();
			  var CatID = $button.parent()[0].id;
			  var SubCtgSum = 0 ;
			  if ($button.parent().find("input[type=text]").hasClass('disableText')){
				  if ($button.hasClass("inc"))
				  {
					  var newVal = parseFloat(oldValue) + 1;
					} else {
				   // Don't allow decrementing below zero
					if (oldValue > 1) {
					  var newVal = parseFloat(oldValue) - 1;
					   } else {
					   
					   if (($button.parent().find("input")[0].name == 'elecCtgCount')){
							newVal = 1;
					   }
					   else{
							newVal = 0;
					   }				 
					}
				  }			  
			  SubCtgSum =  parseFloat($('#ctgsum'+CatID).val()) ;			  
			  if(($button.parent().find("input")[0].name == 'tvSubCat'+CatID ))
			  {   
					//$('#Count'+CatID).tooltipster('update', "You can not enter more than 5 quantity for TV.");
					//$('#Count'+CatID).tooltipster('hide');
					
					var TotalValue = parseFloat((SubCtgSum + newVal) - oldValue )
					
					if (TotalValue <= 0){
					
						$('#Count'+CatID).val(1);
						$('#ctgsum'+CatID).val(1); 
						$button.parent().find("input").val(1);
					
					}
					else{
						$('#Count'+CatID).val(TotalValue);
						$('#ctgsum'+CatID).val(TotalValue); 
						$button.parent().find("input").val(newVal);
					}
					
						$('#Count'+CatID).val(TotalValue);
						$('#ctgsum'+CatID).val(TotalValue); 
						$button.parent().find("input").val(newVal);
			  
					/*if ( TotalValue <= 5){
						
						$('#Count'+CatID).val(TotalValue);
						$('#ctgsum'+CatID).val(TotalValue); 
						$button.parent().find("input").val(newVal);
					}
					else if (TotalValue <= 0){
					
						$('#Count'+CatID).val(1);
						$('#ctgsum'+CatID).val(1); 
						$button.parent().find("input").val(1);
					
					}
					else{
					
						$('#Count'+CatID).val(SubCtgSum);
						$('#ctgsum'+CatID).val(SubCtgSum); 						
						//$('#Count'+CatID).tooltipster('show');
						$button.val(0);
					
					}*/
			  
					
				    /*SubCtgSum = 0 ;
				  //$('input[name^="tvSubCat'+CatID+'"]').each(function(){
					$button.parent().parent().parent().find('input[name^="tvSubCat'+CatID+'"]').each(function(){
						SubCtgSum += parseFloat(this.value);
					});
				
					

				
					if (SubCtgSum == 0){
						SubCtgSum = 1;
						$button.parent().find("input").val(1);
					}*/
					
					  
			  }
			  else if (($button.parent().find("input")[0].name == 'elecCtgCount') )
			  {  
			  
				//$button.parent().find("input").tooltipster('hide');
				if (parseFloat(newVal) <= 20){
					$button.parent().find("input").val(newVal);
					
				}
				else{
					
					//$button.parent().find("input").tooltipster('update', "You can not enter more than 20 quantity for this category.");
					//$button.parent().find("input").tooltipster('show');
					return false;
				
				}
			  
				 
			  }
		  }
		});
			
			$(document).on("click",".completePopup", function() {
			//$('.completePopup').on('click', function(){
			
				$('#card').empty();
				$('#tvCategory').empty(); 
				$('#otherCtegory').empty(); 
				var reqNumber = $(this).parent().find('span.disableClick').text();
				var card = $(this).parent().clone().removeClass('expose').appendTo($('#card'));
				
				$.ajax({
				async: false,
				url: "http://msdwvw-dsndny01.csc.nycnet/ePickupsAPI/api/PickupRequest/GetPickUpRequest?SRNumber="+ reqNumber,
				type: "GET",
				dataType: 'json',	
				crossDomain: true,
				success: function (data) {
		        
					if ( data != undefined){
					
						var arr =  data.PickupRequestItems;	 
						CatgoryList = []; 
						var ctgStr = ''
						 
						
						$.each(arr, function(key, item) {				
							//if (item.checked){				
								//alert('selected');					
							 
							ctgStr = '';
							//var CategoryDiv = $(item).parent().parent();
							var CtgID =  item.CategoryId
							var Ctgname = item.Category
							var CtgVAL = item.RequestedQty;
																					
							

							//$('#tvCategory').append(ctgStr); 
							
							if (item.PickupRequestSubItems.length > 0 )	
							{
								ctgStr +=' <div class="categorycard CustomCards" > <div class="row" style="background-color:#EAC454;color:white;">\
								<div class="col-md-6ths col-xs-8 ctgName ">'+ Ctgname +'</div><div class="col-md-3ths col-xs-2" >Requested</div> <div class="col-md-3ths col-xs-2">Picked Up\
								<input name="ctgsum'+ item.CategoryId +'" id="ctgsum'+ item.CategoryId +'" type="hidden" value="'+ CtgVAL +'" />\
								</div> </div>'
							
								 var arrSubCat = item.PickupRequestSubItems
								 //$(item).parent().parent().find('#tvSubCategory').find('input[type=text]')
								 var SubctgStr = ''; 
								 $.each(arrSubCat, function(Subkey, Subitem) { 
									
									SubctgStr = '';							
									//CtgVAL = ;
									//SubCategoryID = $(Subitem).find('.pure-u-md-3-24').attr('name');  
									SubctgStr +='<div class="row divborder">' 
									//SubctgStr +=''
									SubctgStr +='<div class="col-md-6ths col-xs-8 ctgName ">'+ Subitem.SubCategoryName +'</div><div class="col-md-3ths col-xs-2" >'+ Subitem.Quantity +'</div>'
									SubctgStr +='	<div class="col-md-3ths col-xs-2" id="'+ CtgID +'" > \
										<div class="dec button"><img  src="Assets/hover-minus.svg" class="divdecimage"></div>\
											<input type="text" class="txtValue disableText" name="tvSubCat'+ CtgID +'" maxlength="2"  id="subCategory'+ Subitem.SubCategoryId +'" value="0">\
											<div class="inc button"><img  src="Assets/hover plus.svg" class="divimage" > </div> </div> </div>'
									
									ctgStr += SubctgStr;
									//$('#tvCategory').append(SubctgStr); 
								 });
		
								ctgStr += '</div>';
								$('#tvCategory').append(ctgStr); 
								 
							}
							else{							
								
								ctgStr +='<div class="row divborder">\
								<div class="col-md-6ths col-xs-8 ctgName ">'+ Ctgname +'</div><div class="col-md-3ths col-xs-2" >'+ CtgVAL +'</div>\
								<div class="col-md-3ths col-xs-2" id="'+ CtgID +'" >\
								<div class="dec button"><img  src="Assets/hover-minus.svg" class="divdecimage "></div>\
								<input type="text" class="txtValue disableText"  maxlength="2" name="elecCtgCount" id="Count'+ item.CategoryId +'" value="0">\
								<div class="inc button"><img  src="Assets/hover plus.svg" class="divimage"></div>\
								</div> </div>'
							
								$('#otherCtegory').append(ctgStr); 
							}
							
							//$(item).parent().parent().html()					 					
							//}
						});
						
						$('#tvCategory').append('<div class="row"> <strong>  Comments </strong> </div>'); 
						$('#tvCategory').append('<div class="row"> <textarea id="txtComment" maxlength="250" style="width:100%;resize:none;border: 1px solid rgba(0,0,0,.125);"> </textarea> </div>'); 
							
						}
					
					}
					
					
				});
				
				
				$('#msgModal').modal('show'); 

			});
			 
			  //  Textbox change value 
				$(document).on("keydown","input:text.txtValue",function (e) {
				// Allow: backspace, delete, tab, escape, enter and .
				if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 110, 190]) !== -1 ||
					 // Allow: Ctrl+A, Command+A
					(e.keyCode === 65 && (e.ctrlKey === true || e.metaKey === true)) || 
					 // Allow: home, end, left, right, down, up
					(e.keyCode >= 35 && e.keyCode <= 40)) {
						 // let it happen, don't do anything
						 return;
				}
				// Ensure that it is a number and stop the keypress
				if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
					e.preventDefault();
				}
				});
				 
			
            
        });
        
       
        $("input, select, textarea, form, button btn-group").css("outline", "none");
        $("input, select, textarea, form, button btn-group").css("box-shadow", "none");
    </script>
</body>

</html>